Appclient:
  code: 0
  tableName: client
  fields:
    list: [key, name]
    admin: [show]
  joins:
    oneToMany:
      leagues: League

City:
  code: 1
  tableName: city
  fields:
    list: [name, flag, lat, long, show, sortIdx]
  joins:
    oneToMany:
      leagues: League

League:
  code: 2
  tableName: league
  fields:
    list: [name, sports, sportsSubtype, show, sortIdx]
  joins:
    oneToOne:
      client: Appclient
      city: City
    oneToMany:
      teams: Team
      countries: Country
      stadiums: Stadium
      players: Player

Country:
  code: 3
  tableName: country
  fields:
    list: [name, founded, flag, show, sortIdx]
    public: [socialVk, socialFb, socialIg]
  joins:
    oneToOne:
      league: League
    oneToMany:
      champs: Champ

Champ:
  code: 4
  tableName: champ
  fields:
    list: [name, logoId, show, sortIdx]
  joins:
    oneToOne:
      country: Country
    oneToMany:
      seasons: Season

Season:
  code: 5
  tableName: season
  fields:
    list: [name, inProgress, startingAt, endingAt, show, sortIdx]
  joins:
    oneToOne:
      champ: Champ
    oneToMany:
      stages: Stage

Stage:
  code: 6
  tableName: stage
  fields:
    list: [name, format, definePosition, show, sortIdx, previousStage_id]
  joins:
    oneToOne:
      season: Season
      champ: Champ
      country: Country
      league: League
    oneToMany:
      events: StageEvent
      games: Game
      teams: TeamInStage
      playersApplications: PlayerInStage

StageEvent:
  code: 7
  tableName: stage_event
  fields:
    list: [type, points, date]
  joins:
    oneToOne:
      stage: Stage
      team: Team
      toTeam: Team

Team:
  code: 8
  tableName: team
  fields:
    list: [name, shortName, show, logo, logoId, rating, color]
    public: [founded, uniform, description, website, email, phone, address]
    admin: [show]
  joins:
    oneToOne:
      league: League
      parentTeam: Team
      reserveTeam: Team
      stadium: Stadium
    oneToMany:
      players: PlayerInTeam
      games: Game
      transfers: TransferRequest
      shirts: Shirt
      applications: PlayerInStage

Game:
  code: 9
  tableName: game
  fields:
    list:
      [
        tourNumber,
        netPosition,
        techDefeat,
        stateCode,
        date,
        scoreFtHome,
        scoreFtAway,
        scorePenHome,
        scorePenAway,
        photoCover,
        timerRunning,
        ratingHomeBefore,
        ratingAwayBefore,
        ratingHomeAfter,
        ratingAwayAfter,
      ]
    public:
      [
        homeLineupOptimality,
        awayLineupOptimality,
        timerLastValue,
        timerLastUpdateDate,
        shirtColorHome,
        shirtColorAway,
        formationHome,
        formationAway,
      ]
    admin: [manualScore]
  joins:
    oneToOne:
      stage: Stage
      teamHome: Team
      teamAway: Team
      stadium: Stadium
      pitch: Pitch
    oneToMany:
      events: GameEvent
      players: PlayerInGame
      wishes: GameWish

GameEvent:
  code: 10
  tableName: game_event
  joins:
    oneToOne:
      game: Game
      firstPlayer: Player
      secondPlayer: Player
      team: Team
  fields:
    list: [type, extra, minute]
    public: [comment]

Stadium:
  code: 11
  tableName: stadium
  fields:
    list: [name, address, description, lat, long, photoId]
    public: [pitchSize, pitchCover, capacity]
    admin: [show]
  joins:
    oneToOne:
      league: League
    oneToMany:
      pitches: Pitch
      games: Game

Pitch:
  code: 12
  tableName: pitch
  fields:
    list: [name, description, hasPhoto, photoId]
    admin: [show]
  joins:
    oneToOne:
      stadium: Stadium
    oneToMany:
      games: Game

TransferRequest:
  code: 13
  tableName: transfer_request
  fields:
    list:
      [
        state,
        type,
        createdTimestamp,
        capApprovedTimestamp,
        adminConfirmedTimestamp,
        declinedTimestamp,
      ]
  joins:
    oneToOne:
      fromTeam: Team
      toTeam: Team
      player: Player
      createdBy: User
      capApprovedBy: User
      adminConfirmedBy: User
      declinedBy: User

User:
  code: 14
  tableName: user
  fields:
    list: [login, name, photoId]
    public: [phone, vk, fb, birthday]
    admin: [token, timezoneOffset, language]
  joins:
    oneToOne:
      league: League
    oneToMany:
      games: UserInGame
      roles: Role
      subscription: UserSubscription

Role:
  code: 15
  tableName: role
  fields:
    list: [level]
    public: [extra]
  joins:
    oneToOne:
      user: User
      league: League
      team: Team

Player:
  code: 16
  tableName: player
  fields:
    list:
      [
        firstName,
        middleName,
        lastName,
        photoUrl,
        photoId,
        birthdayDate,
        position,
      ]
    public:
      [
        leg,
        height,
        weight,
        socialVk,
        socialFb,
        socialPhone,
        gender,
        isProfessional,
        eias,
        nationality,
      ]
  joins:
    oneToOne:
      league: League
    oneToMany:
      teams: PlayerInTeam
      games: PlayerInGame
      applications: PlayerInStage
      transfers: TransferRequest

PlayerInGame:
  code: 17
  tableName: player_in_game
  fields:
    list: [number, star, goalkeeper, position, started]
  joins:
    oneToOne:
      game: Game
      player: Player
      team: Team

PlayerInTeam:
  code: 18
  tableName: player_in_team
  fields:
    list: [number]
  joins:
    oneToOne:
      player: Player
      team: Team

PlayerInStage:
  code: 19
  tableName: player_in_stage
  fields:
    list: [number]
  joins:
    oneToOne:
      player: Player
      team: Team
      stage: Stage

TeamInStage:
  code: 20
  tableName: team_in_stage
  fields:
    list: []
  joins:
    oneToOne:
      team: Team
      stage: Stage

Post:
  code: 21
  tableName: post
  fields:
    list: [title, preview, date, photoId, views, type]
    public: [body]
  joins:
    oneToOne:
      game: Game
      author: User
    oneToMany:
      tags: Tag
      likes: PostLike

PostLike:
  code: 22
  tableName: post_like
  fields:
    list: [_id]
  joins:
    oneToOne:
      post: Post
      user: User

Tag:
  code: 23
  tableName: tag
  fields:
    list: [key]
  joins:
    oneToOne:
      post: Post
      city: City
      champ: Champ
      team: Team
      stadium: Stadium
      game: Game
      player: Player
      client: Appclient
      person: User

GameWish:
  code: 24
  tableName: game_wish
  fields:
    list: [date, side, fits]
  joins:
    oneToOne:
      game: Game

Shirt:
  code: 25
  tableName: shirt_in_team_entity
  fields:
    list: [shirt]
  joins:
    oneToOne:
      team: Team
